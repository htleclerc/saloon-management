"use client"; \n\nimport { useAuth } from '@/context/AuthProvider'; \nimport { ReactNode, MouseEvent } from 'react'; \nimport { useTranslation } from '@/i18n'; \n\n/**\n * HOC Component that wraps children and blocks all interactions in read-only mode\n * Use this to wrap forms, buttons, or any interactive elements\n */\ninterface ReadOnlyGuardProps { \n    children: ReactNode; \n    showOverlay ?: boolean; \n } \n\nexport function ReadOnlyGuard({ children, showOverlay = true }: ReadOnlyGuardProps) { \n    const { isReadOnlyMode } = useAuth(); \n    const { t } = useTranslation(); \n\n    const handleClick = (e: MouseEvent) => { \n        if (isReadOnlyMode) { \n            e.preventDefault(); \n            e.stopPropagation(); \n            alert(`âŒ ${t(\"common.readOnlyTitle\")}\\n\\n${t(\"common.readOnlyMessage\")}`);\n        }\n    };\n\n    if (isReadOnlyMode) {\n        return (\n            <div className=\"relative\">\n                {/* Overlay that blocks all interactions */}\n                {showOverlay && (\n                    <div\n                        className=\"absolute inset-0 bg-gray-100/50 z-10 cursor-not-allowed\"\n                        onClick={handleClick}\n                        title={t(\"common.readOnlyTitle\")}\n                    />\n                )}\n                {/* Content with pointer-events disabled */}\n                <div className=\"pointer-events-none opacity-60\">\n                    {children}\n                </div>\n            </div>\n        );\n    }\n\n    return <>{children}</>;\n}\n\n/**\n * Hook version for conditional rendering\n */\nexport function useReadOnlyGuard() {\n    const { isReadOnlyMode } = useAuth();\n    const { t } = useTranslation();\n\n    const blockAction = (callback: () => void) => {\n        if (isReadOnlyMode) {\n            alert(`âŒ ${t(\"common.readOnlyTitle\")}\\n\\n${t(\"common.readOnlyMessage\")}`);\n            return;\n        }\n        callback();\n    };\n\n    const handleReadOnlyClick = () => {\n        if (isReadOnlyMode) {\n            alert(`âŒ ${t(\"common.readOnlyTitle\")}\\n\\n${t(\"common.readOnlyMessage\")}`);\n            return true;\n        }\n        return false;\n    };\n\n    const getButtonProps = () => {\n        if (isReadOnlyMode) {\n            return {\n                disabled: true,\n                className: 'cursor-not-allowed opacity-50',\n                title: t(\"common.readOnlyTitle\")\n            };\n        }\n        return {};\n    };\n\n    return {\n        isReadOnly: isReadOnlyMode,\n        blockAction,\n        handleReadOnlyClick,\n        getButtonProps,\n    };\n}\n
