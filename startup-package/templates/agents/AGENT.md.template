# AGENT.md - Instructions pour l'Agent de D√©veloppement

> Ce fichier d√©finit le contexte, les conventions et les bonnes pratiques pour ce projet.
> L'agent DOIT lire ce fichier au d√©but de chaque session.

---

## üìã Informations Projet

### Projet
- **Nom** : {{PROJECT_NAME}}
- **Type** : {{PROJECT_TYPE}} <!-- Web App / API / Mobile / CLI / Library -->
- **Stack** : {{TECH_STACK}} <!-- Next.js 14 / TypeScript / Tailwind CSS -->
- **Statut** : {{PROJECT_STATUS}} <!-- MVP / Beta / Production / Maintenance -->

### √âquipe
- **Tech Lead** : {{TECH_LEAD}}
- **D√©veloppeurs** : {{TEAM_SIZE}}
- **M√©thodologie** : {{METHODOLOGY}} <!-- Agile / Scrum / Kanban -->

---

## üìö Documentation de R√©f√©rence

**TOUJOURS consulter ces fichiers avant de faire des modifications :**

1. **[startup-package/README.md](startup-package/README.md)** - Vue d'ensemble des bonnes pratiques
2. **[startup-package/docs/standards/ENTERPRISE_STANDARDS.md](startup-package/docs/standards/ENTERPRISE_STANDARDS.md)** - Standards enterprise
3. **[startup-package/docs/devops/CI_CD_GUIDE.md](startup-package/docs/devops/CI_CD_GUIDE.md)** - CI/CD et d√©ploiement

### Documentation Sp√©cifique au Projet
- **[docs/adr/](docs/adr/)** - D√©cisions architecturales
- **[docs/api/](docs/api/)** - Documentation API

---

## üéØ R√®gles Imp√©ratives

### TOUJOURS ‚úÖ
1. Utiliser TypeScript strict mode (`strict: true`)
2. Valider les inputs avec Zod
3. √âcrire des tests pour le nouveau code
4. Utiliser `TodoWrite` pour les t√¢ches complexes (> 3 √©tapes)
5. Faire des commits atomiques avec messages conventionnels
6. Respecter l'architecture existante
7. Documenter les d√©cisions importantes dans `docs/adr/`
8. Lire le code existant avant de cr√©er du nouveau
9. Consulter startup-package/ pour les best practices

### JAMAIS ‚ùå
1. Utiliser `any` en TypeScript
2. Committer des secrets ou credentials
3. Ignorer les erreurs TypeScript ou ESLint
4. Modifier le code sans comprendre le contexte
5. Cr√©er des fichiers sans les rattacher √† la structure existante
6. Push sur main/master directement
7. Supprimer du code sans comprendre son utilit√©
8. Ignorer les tests qui √©chouent

---

## üõ†Ô∏è Conventions de Code

### Nommage

| Type | Convention | Exemple |
|------|------------|---------|
| Variables | camelCase | `userName`, `isActive` |
| Constantes | UPPER_SNAKE | `API_URL`, `MAX_RETRIES` |
| Classes/Types | PascalCase | `UserService`, `ApiResponse` |
| Interfaces | PascalCase (I prefix optionnel) | `User`, `IUserRepository` |
| Fichiers composants | PascalCase | `UserProfile.tsx` |
| Fichiers utils | camelCase | `formatDate.ts` |
| Fichiers tests | *.test.ts ou *.spec.ts | `UserService.test.ts` |
| Hooks | useCamelCase | `useAuth.ts`, `useDebounce.ts` |

### Structure des Composants React

```tsx
// 1. Imports (group√©s par cat√©gorie)
import { useState, useEffect } from 'react';      // React
import { useQuery } from '@tanstack/react-query'; // Librairies externes
import { Button } from '@/components/ui';          // Composants internes
import { formatDate } from '@/lib/utils';          // Utils
import type { User } from '@/types';               // Types (toujours en dernier)

// 2. Types/Interfaces locaux
interface Props {
  user: User;
  onSave: (user: User) => void;
}

// 3. Composant (export nomm√© pr√©f√©r√©)
export function UserProfile({ user, onSave }: Props) {
  // 3.1 Hooks (toujours en premier)
  const [isEditing, setIsEditing] = useState(false);
  const { data, isLoading } = useQuery(...);

  // 3.2 Derived state / Memoization
  const fullName = useMemo(() => `${user.firstName} ${user.lastName}`, [user]);

  // 3.3 Effects
  useEffect(() => { ... }, []);

  // 3.4 Handlers
  const handleSave = () => { ... };

  // 3.5 Early returns (loading, error states)
  if (isLoading) return <Skeleton />;

  // 3.6 Render principal
  return ( ... );
}
```

### Git Commits (Conventional Commits)

```
type(scope): description

Types:
- feat:     Nouvelle fonctionnalit√©
- fix:      Correction de bug
- docs:     Documentation uniquement
- style:    Formatage (pas de changement de code)
- refactor: Refactoring (pas de nouvelle feature ni fix)
- test:     Ajout ou modification de tests
- chore:    Maintenance (deps, config, etc.)

Exemples:
- feat(auth): add password reset functionality
- fix(api): handle null response from users endpoint
- refactor(hooks): extract useDebounce from useSearch
- docs(readme): update installation instructions
```

---

## üèóÔ∏è Architecture

### Structure des Dossiers

```
{{PROJECT_STRUCTURE}}
```

### R√®gles de D√©pendances

```
presentation ‚Üí application ‚Üí domain ‚Üê infrastructure
                    ‚Üì
              domain NE D√âPEND DE RIEN
```

### Patterns Utilis√©s

- **Repository Pattern** : Abstraction de l'acc√®s aux donn√©es
- **Use Case / Service** : Logique m√©tier isol√©e
- **DTO** : Transfer d'objets entre couches
- **Dependency Injection** : Via constructeur ou Context

---

## üîß Commandes Disponibles

```bash
# D√©veloppement
npm run dev          # Serveur de d√©veloppement
npm run build        # Build production
npm run start        # D√©marrer en production

# Qualit√©
npm run lint         # ESLint
npm run lint:fix     # ESLint avec correction auto
npm run type-check   # V√©rification TypeScript
npm run format       # Prettier

# Tests
npm run test         # Tests unitaires
npm run test:watch   # Tests en mode watch
npm run test:cov     # Tests avec couverture
npm run test:e2e     # Tests E2E

# Base de donn√©es (si applicable)
npm run db:generate  # G√©n√©rer client Prisma
npm run db:migrate   # Appliquer migrations
npm run db:seed      # Peupler la base
npm run db:studio    # Interface Prisma Studio
```

---

## üìù Workflow de D√©veloppement

### Pour une Nouvelle Feature

```
1. Cr√©er une branche: git checkout -b feature/nom-feature
2. Lire la documentation pertinente dans startup-package/
3. Utiliser TodoWrite pour planifier les √©tapes
4. Impl√©menter en suivant l'architecture
5. √âcrire les tests
6. V√©rifier: npm run lint && npm run type-check && npm run test
7. Commit avec message conventionnel
8. Cr√©er une PR avec description d√©taill√©e
```

### Pour un Bug Fix

```
1. Cr√©er une branche: git checkout -b fix/description-bug
2. Reproduire le bug
3. √âcrire un test qui √©choue (TDD)
4. Corriger le bug
5. V√©rifier que le test passe
6. V√©rifier qu'aucune r√©gression
7. Commit: fix(scope): description
8. PR
```

### Pour un Refactoring

```
1. S'assurer que tous les tests passent AVANT
2. Cr√©er une branche: git checkout -b refactor/description
3. Faire des changements incr√©mentaux
4. Tester apr√®s chaque modification
5. Aucun changement de comportement
6. Commit: refactor(scope): description
```

---

## ‚ö†Ô∏è Points d'Attention Sp√©cifiques

### S√©curit√©
- Voir [startup-package/docs/security/](startup-package/docs/security/)
- Toujours valider les inputs utilisateur (Zod)
- Ne jamais exposer de donn√©es sensibles dans les logs
- Utiliser les variables d'environnement pour les secrets
- Sanitizer les outputs (XSS)

### Performance
- Voir [startup-package/docs/05-PERFORMANCE.md](startup-package/docs/05-PERFORMANCE.md)
- Lazy loading pour les composants lourds
- Optimiser les images avec next/image
- Utiliser React.memo pour les composants purs
- √âviter les re-renders inutiles

### Accessibilit√©
- Attributs ARIA appropri√©s
- Navigation clavier fonctionnelle
- Contraste suffisant (WCAG AA)
- Labels sur tous les inputs

### Tests
- Voir [startup-package/docs/06-TESTING.md](startup-package/docs/06-TESTING.md)
- Tests unitaires pour la logique m√©tier
- Tests d'int√©gration pour les API
- Tests E2E pour les parcours critiques
- Coverage minimum: 80%

---

## üîó Liens Utiles

### Startup Package
- [README](startup-package/README.md)
- [Standards Enterprise](startup-package/docs/standards/ENTERPRISE_STANDARDS.md)
- [CI/CD](startup-package/docs/devops/CI_CD_GUIDE.md)
- [S√©curit√©](startup-package/docs/security/)
- [i18n](startup-package/docs/internationalization/I18N_GUIDE.md)

### Projet
- [Documentation API](docs/api/)
- [ADRs](docs/adr/)
- [Guides](docs/guides/)

### Externes
- {{EXTERNAL_LINKS}}

---

## üìå Notes Sp√©cifiques au Projet

{{PROJECT_SPECIFIC_NOTES}}

---

**Derni√®re mise √† jour** : {{DATE}}
**Version** : {{VERSION}}
